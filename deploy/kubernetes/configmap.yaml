apiVersion: v1
kind: ConfigMap
metadata:
  name: gorestic-config
  labels:
    app.kubernetes.io/name: gorestic-homelab
data:
  config.yaml: |
    restic:
      repository: "rest:http://rest-server:8000/backup/"
      password: "${RESTIC_PASSWORD}"

    backup:
      paths:
        - /data
      tags:
        - kubernetes
        - automated

    retention:
      keep_daily: 7
      keep_weekly: 4
      keep_monthly: 6

    check:
      enabled: true
      subset: "5%"

    # Uncomment and configure as needed:

    # postgres:
    #   host: "postgres"
    #   port: 5432
    #   database: "myapp"
    #   username: "postgres"
    #   password: "${POSTGRES_PASSWORD}"
    #   format: "custom"

    # telegram:
    #   bot_token: "${TELEGRAM_BOT_TOKEN}"
    #   chat_id: "${TELEGRAM_CHAT_ID}"
